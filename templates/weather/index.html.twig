{% extends 'base.html.twig' %}

{% block title %}Hello WeatherController!{% endblock %}

{% block body %}
    <!-- Weather -->
    <div class="container mt-5">
        <div class="d-flex flex-row justify-content-center align-items-center">
            <div class="weather__card">
                <div class="d-flex flex-row justify-content-center align-items-center">
                    <div class="p-3">
                        <h2>{{ (weather_data.main.temp - 273.15) | number_format(0) }}°</h2>
                    </div>
                    <div class="p-3">
                        <img src="https://openweathermap.org/img/w/{{ weather_data.weather[0].icon }}.png"
                             class="weather-icon" alt="image meteo"/>
                    </div>
                    <div class="p-3">
                        <h5 id="current-time">{{ date_time }}</h5>
                        <h3>{{ weather_data.name }}</h3>
                        <span class="weather__description">{{ weather_data.weather[0].description }}</span>
                    </div>
                </div>
                <div class="weather__status d-flex flex-row justify-content-center align-items-center mt-3">
                    <div class="p-4 d-flex justify-content-center align-items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi
                        bi-droplet" viewBox="0 0 16 16">
                            <path fill-rule="evenodd"
                                  d="M7.21.8C7.69.295 8 0 8 0q.164.544.371 1.038c.812 1.946 2.073 3.35 3.197 4.6C12.878 7.096 14 8.345 14 10a6 6 0 0 1-12 0C2 6.668 5.58 2.517 7.21.8m.413 1.021A31 31 0 0 0 5.794 3.99c-.726.95-1.436 2.008-1.96 3.07C3.304 8.133 3 9.138 3 10a5 5 0 0 0 10 0c0-1.201-.796-2.157-2.181-3.7l-.03-.032C9.75 5.11 8.5 3.72 7.623 1.82z"/>
                            <path fill-rule="evenodd"
                                  d="M4.553 7.776c.82-1.641 1.717-2.753 2.093-3.13l.708.708c-.29.29-1.128 1.311-1.907 2.87z"/>
                        </svg>
                        <p>{{ weather_data.main.humidity }}%</p>
                    </div>
                    <div class="p-4 d-flex justify-content-center align-items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi
                        bi-wind" viewBox="0 0 16 16">
                            <path d="M12.5 2A2.5 2.5 0 0 0 10 4.5a.5.5 0 0 1-1 0A3.5 3.5 0 1 1 12.5 8H.5a.5.5 0 0 1 0-1h12a2.5 2.5 0 0 0 0-5m-7 1a1 1 0 0 0-1 1 .5.5 0 0 1-1 0 2 2 0 1 1 2 2h-5a.5.5 0 0 1 0-1h5a1 1 0 0 0 0-2M0 9.5A.5.5 0 0 1 .5 9h10.042a3 3 0 1 1-3 3 .5.5 0 0 1 1 0 2 2 0 1 0 2-2H.5a.5.5 0 0 1-.5-.5"/>
                        </svg>
                        <p>{{ weather_data.wind.speed }} m/s</p>
                    </div>
                </div>
                <div class="mt-5 d-flex justify-content-center align-items-center">
                    Made with &nbsp
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                         class="bi bi-heart-fill" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                              d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314"/>
                    </svg>
                    &nbsp by &nbsp<a href="https://www.epweb.fr/" target="_blank">Eric</a>
                </div>
            </div>
        </div>
    </div>


{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        function updateCurrentTime() {
            const currentTimeElement = document.getElementById('current-time');
            const currentTime = new Date();
            currentTimeElement.textContent = currentTime.toLocaleString('fr-FR', {timeZone: 'Europe/Paris'});
        }

        // Mettre à jour l'heure toutes les secondes
        setInterval(updateCurrentTime, 1000);
    </script>
{% endblock %}
